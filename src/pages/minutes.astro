---
import List from "../components/Acta/MinutesList.vue";
import RootLayout from "../layouts/RootLayout.astro";
import MinutesService from "../services/Minutes";

const searchParams = Astro.url.searchParams
const type = searchParams.get("type")

async function getActas(tipo: string) {
    try {
        const service = new MinutesService()
        if (!service) {
            throw new Error('Error al leer');
        }

        return service.getAllMinutes(tipo);
    } catch (error) {
        console.error('Error fetching actas:', error);
        throw error;
    }
}

const actas = await getActas(type ?? "all")
---

<RootLayout>
    <List actas={actas} type={type ?? "all"} client:load/>
</RootLayout>
