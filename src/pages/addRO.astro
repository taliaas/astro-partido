---
import CoreService from "../services/CoreService";
import RootLayout from "../layouts/RootLayout.astro";
import MinutesOrdinary from "@/components/Ordinary/MinutesOrdinary.vue";
import FirstStep from "src/components/Ordinary/FirstStep.vue";
import SecondStep from "src/components/Ordinary/SecondStep.vue";
import ThirdStep from "src/components/Ordinary/ThirdStep.vue";
import MilitanteService from "../services/MilitanteService";

async function getCore() {
  const service = new CoreService();
  try {
    return await service.getAllCore();
  } catch (e) {
    console.error(e);
  }
}
async function getMilitantes(){
  const service = new MilitanteService()
  try {
    return await service.getAll();
  }
  catch (e) {
    console.error(e)
  }
}
const cores = await getCore();
const militantes = await getMilitantes();
---

<RootLayout>
  <MinutesOrdinary client:load>
    <FirstStep cores={cores} militantes={militantes} slot="first-step" client:load />
    <SecondStep slot="second-step" client:load />
    <ThirdStep slot="third-step" client:load />
  </MinutesOrdinary>
</RootLayout>
