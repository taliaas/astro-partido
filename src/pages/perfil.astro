---
import AuthService from "../services/AuthService";
import PerfilContainer from "@/components/access/Perfil.vue";
import RootLayout from "../layouts/RootLayout.astro";

const token = Astro.cookies.get("access_token")?.value

async function getUser() {
    const service = new AuthService();
    try {
        return service.profile(token)

    } catch (error) {
        console.log("error");
    }
}

const user = await getUser()
---

<RootLayout>
    <PerfilContainer client:load user={user}/>
</RootLayout>
